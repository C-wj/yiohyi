<view class="container">
  <!-- 头部 -->
  <view class="header">
    <view class="title">欢迎使用</view>
    <view class="subtitle">登录后体验更多功能</view>
  </view>

  <!-- 表单区域 -->
  <view class="form">
    <!-- 标签页 -->
    <view class="tabs">
      <view class="tab {{currentTab === 'password' ? 'active' : ''}}" bindtap="switchTab" data-tab="password">密码登录</view>
      <view class="tab {{currentTab === 'code' ? 'active' : ''}}" bindtap="switchTab" data-tab="code">验证码登录</view>
    </view>

    <!-- 密码登录 -->
    <block wx:if="{{currentTab === 'password'}}">
      <!-- 手机号输入 -->
      <view class="input-group">
        <view class="input-icon">
          <image src="/assets/images/icons/phone.png"></image>
        </view>
        <input class="input" type="number" maxlength="11" placeholder="请输入手机号" placeholder-class="placeholder" bindinput="inputPhone" value="{{phoneNumber}}" />
      </view>

      <!-- 密码输入 -->
      <view class="input-group">
        <view class="input-icon">
          <image src="/assets/images/icons/lock.png"></image>
        </view>
        <input class="input" password="{{!isShowPassword}}" placeholder="请输入密码" placeholder-class="placeholder" bindinput="inputPassword" value="{{password}}" />
        <view class="input-icon" bindtap="togglePasswordVisibility">
          <image src="{{isShowPassword ? '/assets/images/icons/eye-open.png' : '/assets/images/icons/eye-close.png'}}"></image>
        </view>
      </view>

      <!-- 忘记密码 -->
      <view class="action-row">
        <text class="forget-text" bindtap="forgetPassword">忘记密码</text>
      </view>
    </block>

    <!-- 验证码登录 -->
    <block wx:else>
      <!-- 手机号输入 -->
      <view class="input-group">
        <view class="input-icon">
          <image src="/assets/images/icons/phone.png"></image>
        </view>
        <input class="input" type="number" maxlength="11" placeholder="请输入手机号" placeholder-class="placeholder" bindinput="inputPhone" value="{{phoneNumber}}" />
      </view>

      <!-- 验证码输入 -->
      <view class="input-group">
        <view class="input-icon">
          <image src="/assets/images/icons/shield.png"></image>
        </view>
        <input class="input code-input" type="number" maxlength="6" placeholder="请输入验证码" placeholder-class="placeholder" bindinput="inputCode" value="{{code}}" />
        <view class="code-btn {{countdown > 0 ? 'disabled' : ''}}" bindtap="sendCode">
          {{countdown > 0 ? countdown + 's' : '获取验证码'}}
        </view>
      </view>
    </block>

    <!-- 协议同意 -->
    <view class="agreement">
      <checkbox checked="{{isCheck}}" bindtap="onCheckboxChange"></checkbox>
      <text class="agreement-text">我已阅读并同意<text class="link-text">《用户协议》</text>和<text class="link-text">《隐私政策》</text></text>
    </view>

    <!-- 登录按钮 -->
    <view class="btn-area">
      <button class="primary-btn {{submitDisabled ? 'disabled' : ''}}" disabled="{{submitDisabled}}" bindtap="formSubmit">登录</button>
    </view>

    <!-- 切换到注册 -->
    <view class="switch-action">
      <text>还没有账号？</text>
      <text class="link-text" bindtap="goToRegister">立即注册</text>
    </view>
  </view>

  <!-- 其他登录方式 -->
  <view class="other-login">
    <view class="divider">
      <view class="divider-line"></view>
      <text class="divider-text">其他登录方式</text>
      <view class="divider-line"></view>
    </view>
    <view class="other-login-btn">
      <button class="wechat-btn" open-type="getUserInfo">
        <image src="/assets/images/icons/wechat.png"></image>
      </button>
    </view>
  </view>
</view>
