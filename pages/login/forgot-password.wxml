<t-navbar left-arrow />
<view class="page forgot-password">
  <view class="forgot-password__header">
    <view class="title">找回密码</view>
    <view class="subtitle">通过手机号码或邮箱验证找回密码</view>
  </view>

  <view class="forgot-password__content">
    <view class="forgot-password__tabs">
      <view class="forgot-password__tab {{currentTab === 'phone' ? 'active' : ''}}" bindtap="switchToPhone">手机找回</view>
      <view class="forgot-password__tab {{currentTab === 'email' ? 'active' : ''}}" bindtap="switchToEmail">邮箱找回</view>
    </view>
    
    <!-- 手机找回 -->
    <view class="forgot-password__form" wx:if="{{currentTab === 'phone'}}">
      <t-input
        label="手机号"
        placeholder="请输入注册时的手机号"
        type="number"
        value="{{phoneInfo.phone}}"
        bindchange="onPhoneChange"
        prefixIcon="mobile"
      ></t-input>
      <t-input 
        label="验证码"
        placeholder="请输入验证码" 
        value="{{phoneInfo.code}}" 
        type="number" 
        bindchange="onCodeChange"
        prefixIcon="lock-off"
      >
        <view slot="suffix" class="suffix">
          <view class="suffix--line"></view>
          <t-link
            size="small"
            hover
            disabled="{{sendCodeCount !== 0}}"
            theme="primary"
            content="{{sendCodeCount === 0 ? '获取验证码' : sendCodeCount+'秒' }}"
            bindtap="sendPhoneCode"
          />
        </view>
      </t-input>
      <t-input
        label="新密码"
        placeholder="请输入新密码(至少8位,包含字母和数字)"
        type="password"
        clearable
        value="{{phoneInfo.password}}"
        bindchange="onPhonePasswordChange"
        prefixIcon="lock-on"
        tips="密码长度至少8位,包含字母和数字"
      />
      <t-input
        label="确认密码"
        placeholder="请再次输入新密码"
        type="password"
        clearable
        value="{{phoneInfo.confirmPassword}}"
        bindchange="onPhoneConfirmPasswordChange"
        prefixIcon="lock-on"
      />
    </view>
    
    <!-- 邮箱找回 -->
    <view class="forgot-password__form" wx:if="{{currentTab === 'email'}}">
      <t-input
        label="邮箱"
        placeholder="请输入注册时的邮箱"
        type="text"
        value="{{emailInfo.email}}"
        bindchange="onEmailChange"
        prefixIcon="mail"
      ></t-input>
      <t-input 
        label="验证码"
        placeholder="请输入验证码" 
        value="{{emailInfo.code}}" 
        type="text" 
        bindchange="onEmailCodeChange"
        prefixIcon="lock-off"
      >
        <view slot="suffix" class="suffix">
          <view class="suffix--line"></view>
          <t-link
            size="small"
            hover
            disabled="{{sendEmailCodeCount !== 0}}"
            theme="primary"
            content="{{sendEmailCodeCount === 0 ? '获取验证码' : sendEmailCodeCount+'秒' }}"
            bindtap="sendEmailCode"
          />
        </view>
      </t-input>
      <t-input
        label="新密码"
        placeholder="请输入新密码(至少8位,包含字母和数字)"
        type="password"
        clearable
        value="{{emailInfo.password}}"
        bindchange="onEmailPasswordChange"
        prefixIcon="lock-on"
        tips="密码长度至少8位,包含字母和数字"
      />
      <t-input
        label="确认密码"
        placeholder="请再次输入新密码"
        type="password"
        clearable
        value="{{emailInfo.confirmPassword}}"
        bindchange="onEmailConfirmPasswordChange"
        prefixIcon="lock-on"
      />
    </view>

    <view class="forgot-password__button">
      <t-button 
        theme="primary" 
        size="large" 
        block 
        disabled="{{!isSubmit}}" 
        bindtap="resetPassword">
        重置密码
      </t-button>
    </view>
  </view>
</view> 